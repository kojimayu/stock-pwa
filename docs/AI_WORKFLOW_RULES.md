# AI 運用ルールとワークフロー

このドキュメントでは、AIエージェント（Antigravity）との協働におけるルールと定義されたワークフローについて記述します。

## 基本ルール

### 1. 「保存して」コマンド
ユーザーが「保存して」と指示した場合、AIは必ず以下の2つの操作をセットで行うこと。

1. **バックアップの作成**: `scripts/backup_db.ps1` を実行して、データベースと環境変数をバックアップする。
2. **Gitコミット**: 現在の変更をステージングし、適切なメッセージでコミットする。

### 2. 機能変更時のドキュメント更新
機能の追加・変更・削除を行った場合は、必ず関連するマニュアル（`docs/MANUAL_*.md`など）も更新すること。
- コードの実装とドキュメントの記載内容を常に一致させる。
- ユーザーへの報告時に、ドキュメントの更新箇所も併せて報告する。

### 3. 承認を求める際のルール
ユーザーに承認（Yes/No）を求める際は、必ず「ユーザーが何を承認しようとしているのか」を明確にするため以下を説明すること。
1. **これから行う操作の内容**（例：ファイルの削除、外部への送信、破壊的な変更など）
2. **その操作を行う理由とリスク**
3. **（あれば）代替案**

例：「以下の不要な一時ファイルを削除してよろしいでしょうか？（システムには影響ありません）」

## 定義済みワークフロー

### `/save-backup` (保存とバックアップ)
上記の「保存して」コマンドを体系化したもの。`.agent/workflows/save_and_backup.md` に定義。

---
> **Note**: このルールはプロジェクトの安全性とデータ保全を確実にするためのものです。
