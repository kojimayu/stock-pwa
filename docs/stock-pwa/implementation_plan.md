# 棚卸機能 UI/UX 改善計画

## 目的
棚卸入力画面に関するユーザーフィードバック（入力のしにくさ、スクロールの煩雑さ）を解消し、現場での作業効率を向上させる。

## フィードバック内容
1.  **「0」が入力できない**: 間違って数量を入れた後に「0」に戻そうとしても戻せない（または削除できない）。
2.  **フォーカス位置のズレ**: キーボードの「次へ」等で移動した際、画面がスクロールせず、入力欄が隠れてしまうことがある。
3.  **スクロールが大変**: カバー類など項目が多い商品は、探すのにおおきなスクロールが必要。
4.  **検索機能**: 商品名などで絞り込みたい。

## 変更案

### [Frontend]
#### [MODIFY] [inventory-detail.tsx](file:///f:/Antigravity/stock-pwa/components/admin/inventory-detail.tsx)

1.  **検索機能の実装**:
    *   画面上部（固定ヘッダー付近）に検索ボックスを追加。
    *   入力されたキーワード（商品名、品番）でリストをリアルタイムにフィルタリングする。
    *   *効果*: 目的の商品に即座にアクセス可能にする。

2.  **入力ハンドリングの修正（「0」問題）**:
    *   現在の `handleStockChange` を見直し。
    *   `parseInt` の挙動や `NaN` チェックが厳しすぎて、一時的な空欄や「0」入力を弾いている可能性があるため修正。
    *   空文字（全削除）を許容し、保存時は「0」または「元の値」として扱うロジックを整理する。

3.  **フォーカス時の自動スクロール**:
    *   入力欄（Input）の `onFocus` イベントにて、`scrollIntoView` を呼び出す。
    *   `block: 'center'` オプションを使用し、入力中の項目が常に画面中央に来るようにする。
    *   モバイルキーボードの展開時間を考慮し、わずかな遅延（setTimeout）を入れる調整を行う。

## 検証プラン
1.  **検索**: 「カバー」と入力し、カバー関連商品のみが表示されることを確認。
2.  **0入力**: 在庫「5」を「0」に書き換え、保存されるか確認。また、BackSpaceで空にした時の挙動を確認。
3.  **スクロール**: ソフトウェアキーボードの「次へ」で移動した際、次の入力欄が隠れずに表示されるか確認。
